<main>
  <div class="container">
    <% if flash[:notice].present? %>
      <p style="color: green; text-align:center; border: .5px solid green; border-radius: .5rem; background-color: rgba(0, 255, 0, 0.1); width:50%; margin: 1rem auto; padding: .5rem 0"><%= notice %></p>
    <% end %>
    <div class="row my-4">
      <h2>All our Flats (<%= @flats_count %>)</h2>

      <% if params[:query].present? %>
        <p>You searched for <strong><%= params[:query] %>.</strong> We found <%= @flats_count %> flats out of <%= @all_flats_count %> on our website</p>
      <% end %>
    </div>
    <div class="row">
      <% @flats.each do |flat| %>
        <div class="col-md-4 mb-4">
          <div class="card shadow-sm card-index">
            <% if flat.picture_url.present? %>
              <%= image_tag flat.picture_url, class: "card-img-top img-fluid", alt: flat.name %>
            <% else %>
              <%= image_tag 'jr-korpa-9XngoIpxcEo-unsplash.jpg', class: "card-img-top img-fluid", alt: "Default Image" %>
            <% end %>
            <div class="card-body">
              <h5 class="card-title"><%= flat.name %></h5>
              <p class="card-text"><%= flat.address %>, <%= flat.zip_code %>, <%= flat.city %>, <%= flat.country %></p>
              <div class="d-flex justify-content-start align-items-center">
                <p class="card-text mb-0 me-4 d-flex align-items-center">
                  <i class="fa-solid fa-users me-2"></i>
                  <%= flat.number_of_guests %>
                </p>
                <p class="card-text mb-0 d-flex align-items-center">
                  <i class="fa-solid fa-euro-sign me-2"></i>
                  <%= flat.price_per_nights %>
                </p>
              </div>
            </div>
            <div class="card-footer">
              <%= link_to "More info", flat_path(flat), class: "btn btn-outline-primary" %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</main>
